{% extends "base.html" %}
{% load static %}

{% block extra_head %}
<!-- Inclusão dos estilos para o EasyMDE e Font Awesome -->
<link rel="stylesheet" href="https://unpkg.com/easymde/dist/easymde.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
{% endblock %}

{% block content %}
<div class="container mx-auto py-8 max-w-2xl">
  <h1 class="text-2xl font-bold mb-4">Criar Post no Estilo Blog</h1>

  <!-- Removido o atributo enctype pois não há mais upload de arquivos -->
  <form method="post" class="space-y-6">
    {% csrf_token %}

    <!-- Campo: Título -->
    <div class="form-control">
      <label class="label">
        <span class="label-text font-medium">Título</span>
      </label>
      {{ form.title }}
      {% if form.title.errors %}
      <label class="label">
        <span class="label-text-alt text-error">{{ form.title.errors }}</span>
      </label>
      {% endif %}
    </div>

    <!-- Campo: Conteúdo com EasyMDE -->
    <div class="form-control">
      <label class="label">
        <span class="label-text font-medium">Conteúdo</span>
      </label>
      {{ form.content }}
      {% if form.content.errors %}
      <label class="label">
        <span class="label-text-alt text-error">{{ form.content.errors }}</span>
      </label>
      {% endif %}
    </div>

    <!-- Botão de envio -->
    <div class="text-center pt-4">
      <button type="submit" class="btn btn-primary">Criar Post</button>
    </div>
  </form>
</div>
{% endblock %}

{% block extra_scripts %}
<!-- Inclusão do script do EasyMDE -->
<script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>
<script>
  // Inicializa o EasyMDE ao carregar a página, aplicando o editor no campo 'content'
  window.onload = function () {
    const textarea = document.querySelector('textarea[name="content"]');
    if (textarea) {
      const easyMDE = new EasyMDE({
        element: textarea,
        spellChecker: false,
        placeholder: "Escreva seu post aqui...",
        toolbar: ["bold", "italic", "|", "preview"],
      });
    }
  };
</script>
{% endblock %}
